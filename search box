
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Document</title>
</head>
<body>
    <div id="wrapper">
      <div id="button">
    <button id="add-btn" style="visibility:hidden"></button>
            <span><input id="searchBox" type="text" placeholder="Search Notes" onkeyup="search()"></span>
      </div>
      <div id="note-editor">
        <input itemid="title" style="float: right;" type="text" id="title" name="title" placeholder="Enter Notes Title"/>
        <div id="error"></div>
        <textarea rows="31" cols="108" onblur="createNotes()" id="message" name="message" data-provide="markdown" placeholder="Enter Your Notes" style="padding: 10px; padding-left: 22px;"></textarea>
      </div>
    </div>
    <div id="notes-section">
        <ul id="notes"></ul>
      </div>
  </body>
</html>
<script>
    (function() {
  'use strict';

  var app = {
    noteEditor: document.getElementById('note-editor'),
    title: document.getElementById('title'),
    message: document.getElementById('message'),
    addButton: document.getElementById('add-btn'),
    errorDisplay: document.getElementById('error'),
    deleteButton: document.querySelector('.delete'),
    editButton: document.querySelector('.edit'),
    notesSection: document.getElementById('notes-section'),
    notes: document.getElementById('notes'),
    editMode: false,

    init: function() {
      app.title.addEventListener('focus', app.clearError);
      app.message.addEventListener('focus', app.clearError);

      app.title.addEventListener('keypress', app.detectInput);
      app.message.addEventListener('keypress', app.detectInput);

      app.addButton.addEventListener('click', app.createNote);
    },
    detectInput1: function() {
      if(!app.title.value || !app.message.value) {
        return;
      } else {
        app.addButton.innerText = '<i class="fa fa-save" aria-hidden="true"></i>Save Note';
      }
    },
    clearError: function() {
      app.title.classList.remove('is-empty');
      app.message.classList.remove('is-empty');
      app.errorDisplay.innerHTML = '';
    },
    createNote: function() {
      if(!app.title.value || !app.message.value) {
        if(!app.title.value) {
          app.title.classList.add('is-empty');  
        }
        if(!app.message.value) {
          app.message.classList.add('is-empty');
        }
        app.errorDisplay.innerHTML = '<span>*Values required</span>';
        return;
      } else {
        var note = new Object();

        note.title = app.title.value;
        note.message = app.message.value;
        var today = new Date();
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        var yyyy = today.getFullYear();
        today = mm + '/' + dd + '/' + yyyy;
        note.date = today;

        app.addNote(note);
      }
    },
    addNote: function(note) {
      var li = document.createElement('li'),
      deleteBtn = document.createElement('span'),
      editBtn = document.createElement('span'),
      title = document.createElement('span'),
      message = document.createElement('span'),
      date = document.createElement('span'),
      footer = document.createElement('footer');

      deleteBtn.className = 'delete';
      deleteBtn.innerHTML = '<i class="fa fa-trash-o"></i>';
      deleteBtn.addEventListener('click', app.deleteNote);

      title.className = 'note-title';
      title.innerHTML = note.title;

      message.className = 'note-message';
      message.innerHTML = note.message;

      date.className = 'note-date';
      date.innerText = note.date;

      editBtn.className = 'edit';
      editBtn.innerHTML = '<i class="fa fa-pencil-square-o"></i> Edit';
      editBtn.addEventListener('click', app.editNote);

footer.appendChild(editBtn);

      li.appendChild(deleteBtn);
      li.appendChild(title);
      li.appendChild(message);
      li.appendChild(date);
      li.appendChild(footer);

      app.notes.prepend(li);

      app.title.value = '';
      app.message.value = '';

      if(!app.editMode) {
        app.addButton.innerHTML = '<i class="fa fa-save" aria-hidden="true"></i>Save Note';
      } else {
        setTimeout(function() {
          app.addButton.innerHTML = '<i class="fa fa-save" aria-hidden="true"></i>Save Note';
        }, 200);
      }
    },
    editNote: function() {
      var li,
      title,
      message,
      note = new Object();

      li = this.parentNode.parentNode;

      for(var i = 0; i < li.childNodes.length; i++) {
        if(li.childNodes[i].className === 'note-title') {
          title = li.childNodes[i].innerText;
        }
      }

      for(var i = 0; i < li.childNodes.length; i++) {
        if(li.childNodes[i].className === 'note-message') {
          message = li.childNodes[i].innerText;
        }
      }

      note.title = title;
      note.message = message;
      
      app.openNote(note);

      setTimeout(function() {
        li.remove();
      }, 200);
    },
    openNote: function(note) {
      if(!app.editMode) {
        app.noteEditor.classList.add('hide');
        app.notesSection.classList.add('hide');
      
        setTimeout(function() {
          
          app.addButton.innerText = 'Done';
          app.addButton.removeEventListener('click', app.createNote);
          app.addButton.addEventListener('click', app.saveNote);

          app.title.value = note.title;
          app.message.value = note.message;

          app.noteEditor.classList.remove('hide');
          app.editMode = true;
        }, 200);
      } else {
        return;
      }  
    },
    saveNote: function() {
      app.createNote();

      app.noteEditor.classList.add('hide');
      app.notesSection.classList.add('hide');
    
      setTimeout(function() {

        app.addButton.removeEventListener('click', app.saveNote);
        app.addButton.addEventListener('click', app.createNote);

        app.title.value = '';
        app.message.value = '';

        app.notesSection.classList.remove('hide');
        app.noteEditor.classList.remove('hide');
        app.editMode = false;
      }, 200);
    },    
    deleteNote: function() {
      this.parentNode.remove();
    }
  };

  app.init();

})();
function search() {
    var input, filter, ul, li, a, i, txtValue;
    input = document.getElementById("searchBox");
    filter = input.value.toUpperCase();
    ul = document.getElementById("notes");
    li = ul.getElementsByTagName("li");
    for (i = 0; i < li.length; i++) {
        a = li[i].getElementsByClassName("note-title")[0];
        txtValue = a.textContent || a.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
        } else {
            li[i].style.display = "none";
        }
    }
}
function createNotes()  {
            document.getElementById('add-btn').click();
        }
</script>
<style>
    body {
  margin: 0;
  padding: 0;
  font-size: 18px;
}

* {
  font-family: 'Roboto', sans-serif;
  font-weight: 300;
}
i:before {
    font-size: 14px !important;
    padding-right: 5px;
}
#wrapper {
  width: 100%;
  max-width: 1140px;
  margin: 0 auto;
  padding: 0 20px;
  margin-right: -19px;
}

#note-editor {
  padding-bottom: 0px;
  margin-bottom: 5px;
  opacity: 1;
  transition: all 0.25s ease-out;
}

#note-editor.hide {
  opacity: 0;
}

label {
  display: block;
  width: 100%;
  margin-bottom: 15px;
}

#title {
    font-size: 16px;
    display: block;
    width: 876px;
    height: 30px;
    margin-bottom: 15px;
    padding: 8px 20px;
    margin-top: 50px;
    border: 1px solid rgb(133, 133, 133);
    border-radius: 5px;
}

#title.is-empty {
  border: 2px solid tomato;
}

#searchBox{
    background-image: url('https://www.w3schools.com/css/searchicon.png');
    background-position: 10px 12px;
    background-repeat: no-repeat;
    font-size: 16px;
    display: block;
    width: 310px;
    height: 30px;
    padding: 8px 50px;
    border: 1px solid rgb(133, 133, 133);
    border-radius: 5px;
    margin-left: 120px;
    margin-top: -57px;
}
textarea {
    font-size: 16px;
    display: block;
    margin-bottom: 15px;
    padding: 8px 6px;
    float: right;
    border-radius: 5px;
}

textarea.is-empty {
  border: 2px solid tomato;
}

#button {
  position: relative;
  margin-left: -320px;
  margin-bottom: -97px;
  width: 100px;
}

#error {
  color: tomato;
  position: absolute;
  top: 12px;
  left: 550px;
  line-height: 16px;
  width: 115px;
  font-size: smaller;
}

select {
  display: block;
  margin-bottom: 15px;
  width: 175px;
  padding: 0;
  height: 24px;
}

button {
  position: relative;
  display: block;
  width: 100px;
  height: 48px;
  margin-top: 40px;
  padding: 12px 8px;
  border-radius: 5px;
  margin-bottom: 11px;
  outline: none;
  border:0;
  box-shadow: 1px 1px 2px rgba(0,0,0,0.3);
  background: green;
  color: white;
  font-size: 14px;
}

button:active {
  box-shadow: 0px 0px 1px rgba(0,0,0,0.1);
  top: 1px;
  left: 1px;
}

button:hover{
  cursor: pointer;
}

ul {
  padding-left: 0;
}

#notes-section {
  opacity: 1;
  visibility: visible;
  transition: all 0.25s ease-out;
  overflow: auto;
  height: 608px;
  margin-left: 3px;
  margin-top: 100px;
}

#notes-section.hide {
  opacity: 0;
  visibility: hidden;
}

#notes li {
  position: relative;
  list-style-type: none;
  display: block;
  float: left;
  width: 386px;
  height: 70px;
  padding: 8px 12px;
  border-radius: 5px;
  margin: 0 5px 12px;
  border: 1px dashed;
}

#notes li.red {
  background: pink;
}

#notes li.green {
  background: palegreen;
}

#notes li.blue {
  background: lightskyblue;
}

footer {
  width: 100%;
  height: 24px;
  left: 0;
  background: rgba(255,255, 255, 0.4);
  padding: 5px 0;
  font-size: smaller;
}

.edit {
  position: absolute;
  height: 24px;
  cursor: pointer;
  margin-left: 339px;
}
.edit:hover{
  color: #6304ff;
}
.delete {
  float: right;
  position: absolute;
  top: 5px;
  right: 5px;
}

.delete:hover{
  cursor: pointer;
  color: rgb(254, 49, 13);
  background-color: rgb(234, 234, 234);
  border-radius: 50%;
  width: 21px;
}

i:before {
  font-size: 18px;
}
.fa-trash-o:before{
  padding-left: 5px;
}

.note-title {
  font-size: 1.5em;
  font-weight: bold;
  display: block;
  width: 100%;

}

.note-message {
  display: block;
  width: 50%; 
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.note-date{
   font-size: 14px;
    margin-top: -17px;
    float: right;
    margin-right: 110px;
    font-weight: bolder;
}
</style>
